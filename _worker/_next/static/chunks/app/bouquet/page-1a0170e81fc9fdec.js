(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[156],{2524:(e,t,r)=>{"use strict";r.d(t,{BouquetProvider:()=>i,Z:()=>o});var a=r(5155),n=r(2115),s=r(3935);let l=(0,n.createContext)(void 0);function i(e){let{children:t,mode:r,lang:i}=e;console.log("BouquetProvider initialLang:",i);let[o,c]=(0,n.useState)(i||"ar");n.useEffect(()=>{i&&c(i)},[i]);let[d,m]=(0,n.useState)({mode:r,flowers:[],letter:{sender:"",recipient:"",message:""},greenery:0,timestamp:Date.now(),flowerOrder:[]});n.useEffect(()=>{m(e=>({...e,mode:r}))},[r]);let u=(0,s.RW)(d.flowers),f=(0,s.z4)(d.flowers);return(0,a.jsx)(l.Provider,{value:{bouquet:d,setBouquet:m,totalFlowers:u,canProceed:f,addFlower:e=>{m(t=>{let r;r=t.flowers.find(t=>t.id===e.id)?t.flowers.map(t=>t.id===e.id?{...t,count:t.count+1}:t):[...t.flowers,{id:e.id,count:1}];let a=(0,s.A5)(r);return{...t,flowers:r,flowerOrder:a}})},removeFlower:e=>{m(t=>{let r,a=t.flowers.find(t=>t.id===e);if(!a)return t;r=a.count<=1?t.flowers.filter(t=>t.id!==e):t.flowers.map(t=>t.id===e?{...t,count:t.count-1}:t);let n=(0,s.A5)(r);return{...t,flowers:r,flowerOrder:n}})},lang:o,setLang:c},children:t})}function o(){let e=(0,n.useContext)(l);if(void 0===e)throw Error("useBouquet must be used within a BouquetProvider");return e}},3935:(e,t,r)=>{"use strict";function a(e){return Array.from({length:e.reduce((e,t)=>e+t.count,0)},(e,t)=>t)}function n(e){let t={};return e.forEach(e=>{t[e.id]=e.count}),t}function s(e){return e.reduce((e,t)=>e+t.count,0)}function l(e){let t=s(e);return t>=6&&t<=10}r.d(t,{A5:()=>a,RW:()=>s,fr:()=>n,z4:()=>l})},5597:(e,t,r)=>{"use strict";r.d(t,{default:()=>F});var a=r(5155),n=r(2115),s=r(6766);let l=[{id:1,name:"orchid",meaning:"Beauty",nameAr:"الأوركيد",meaningAr:"جمال الخالق",birthMonth:"October",size:"medium"},{id:2,name:"tulip",meaning:"Perfect love",nameAr:"التوليب",meaningAr:"مودة صادقة",birthMonth:"April",size:"medium"},{id:3,name:"dahlia",meaning:"Elegance",nameAr:"الداليا",meaningAr:"وقار وهيبة",birthMonth:"August",size:"small"},{id:4,name:"anemone",meaning:"Anticipation",nameAr:"شقائق النعمان",meaningAr:"شوق للقاء",birthMonth:"September",size:"medium"},{id:5,name:"carnation",meaning:"Fascination",nameAr:"القرنفل",meaningAr:"بهجة ومودة",birthMonth:"January",size:"large"},{id:6,name:"zinnia",meaning:"Lasting Affection",nameAr:"الزينيا",meaningAr:"أخوة دائمة",birthMonth:"July",size:"medium"},{id:7,name:"ranunculus",meaning:"Radiant Charm",nameAr:"الحوذان",meaningAr:"نور وبهاء",birthMonth:"March",size:"medium"},{id:8,name:"sunflower",meaning:"Adoration",nameAr:"زهرة الشمس",meaningAr:"وفاء وإخلاص",birthMonth:"August",size:"large"},{id:9,name:"lily",meaning:"Purity",nameAr:"الزنبق",meaningAr:"طهر ونقاء",birthMonth:"May",size:"large"},{id:10,name:"daisy",meaning:"Innocence",nameAr:"الأقحوان",meaningAr:"قلب سليم",birthMonth:"April",size:"small"},{id:11,name:"peony",meaning:"Romance",nameAr:"الفاوانيا",meaningAr:"سكينة ورحمة",birthMonth:"May",size:"medium"},{id:12,name:"rose",meaning:"Love and passion",nameAr:"الجوري",meaningAr:"محبة عميقة",birthMonth:"June",size:"medium",color:"red"}];var i=r(7040),o=r(2596),c=r(9688);function d(e){let{delayDuration:t=0,...r}=e;return(0,a.jsx)(i.Kq,{"data-slot":"tooltip-provider",delayDuration:t,...r})}function m(e){let{...t}=e;return(0,a.jsx)(d,{children:(0,a.jsx)(i.bL,{"data-slot":"tooltip",...t})})}function u(e){let{...t}=e;return(0,a.jsx)(i.l9,{"data-slot":"tooltip-trigger",...t})}function f(e){let{className:t,sideOffset:r=0,children:n,...s}=e;return(0,a.jsx)(i.ZL,{children:(0,a.jsx)(i.UC,{"data-slot":"tooltip-content",sideOffset:r,className:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,c.QP)((0,o.$)(t))}("rounded border shadow-lg bg-background text-popover-foreground border-primary animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) px-3 py-1.5 text-balance",t),...s,children:n})})}var h=r(2524),x=r(3935);function p(){let{bouquet:e,totalFlowers:t,addFlower:r,removeFlower:n,lang:i}=(0,h.Z)(),o=(0,x.fr)(e.flowers);return(0,a.jsx)(d,{disableHoverableContent:!0,delayDuration:0,children:(0,a.jsxs)("div",{className:"h-full text-center dfont-crimson ".concat("ar"===i?"font-arabic":""),children:[(0,a.jsx)("h2",{className:"mb-4 uppercase text-md",children:"ar"===i?"اختر من 6 إلى 10 زهرات":"Pick 6 to 10 BLOOMS"}),t>0&&(0,a.jsx)("p",{className:"mb-8 text-sm opacity-50",children:"ar"===i?"اضغط على اسم الزهرة لإلغاء تحديدها.":"Click on a flower's name to deselect it."}),(0,a.jsx)("div",{className:"flex flex-wrap justify-center gap-4 mb-8 items-center min-h-[200px]",children:l.map(t=>(0,a.jsxs)(m,{children:[(0,a.jsx)(u,{asChild:!0,children:(0,a.jsxs)("button",{className:"flex relative flex-col items-center cursor-pointer",onClick:e=>{e.preventDefault(),r(t)},children:[(0,a.jsx)("div",{className:"".concat("small"===t.size?"w-32 h-32":"large"===t.size?"w-48 h-48":"w-40 h-40"," flex items-center justify-center transition-transform duration-300 overflow-hidden ").concat(o[t.id]?"transform -translate-y-2":""," hover:transform hover:-translate-y-2"),children:(0,a.jsx)(s.default,{src:"/"+e.mode+"/flowers/"+t.name+".png",alt:"ar"===i&&t.nameAr||t.name,width:"small"===t.size?128:"large"===t.size?192:160,height:"small"===t.size?128:"large"===t.size?192:160,className:"object-cover",priority:!0})}),o[t.id]&&(0,a.jsx)("div",{className:"flex absolute top-0 right-0 justify-center items-center w-5 h-5 text-xs rounded-full bg-primary text-primary-foreground sm:w-6 sm:h-6",children:o[t.id]})]})}),(0,a.jsx)(f,{onPointerDownOutside:e=>e.preventDefault(),side:"bottom",sideOffset:8,className:"z-10 p-4 w-auto min-w-[120px] text-center ".concat("ar"===i?"font-arabic":""),children:(0,a.jsx)("h3",{className:"font-bold text-xl md:text-2xl",children:"ar"===i?t.nameAr||t.name:t.name.toUpperCase()})})]},t.id))}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)("div",{className:"flex flex-wrap gap-2 justify-center mt-2",children:Object.entries(o).map(e=>{let[t,r]=e,s=l.find(e=>e.id===Number.parseInt(t));return s?(0,a.jsxs)("div",{className:"px-3 py-1 text-sm rounded-full border transition-colors cursor-pointer border-primary text-primary hover:bg-primary hover:text-primary-foreground ".concat("ar"===i?"font-arabic":""),onClick:()=>n(Number.parseInt(t)),children:["ar"===i?(s.nameAr||s.name).toUpperCase():s.name.toUpperCase()," x",r]},t):null})})})]})})}function g(){let{bouquet:e,setBouquet:t,lang:r}=(0,h.Z)();return(0,a.jsxs)("div",{className:"flex flex-col mx-auto max-w-screen-lg ".concat("ar"===r?"font-arabic":""),children:[(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h2",{className:"mb-6 text-center uppercase text-md",children:"ar"===r?"نسّق باقتك":"Customize Your Bouquet"}),(0,a.jsxs)("div",{className:"flex flex-col justify-center items-center space-y-4",children:[(0,a.jsx)("button",{onClick:()=>{let r=Array.from({length:e.flowers.reduce((e,t)=>e+t.count,0)},(e,t)=>t);for(let e=r.length-1;e>0;e--){let t=Math.floor(Math.random()*(e+1));[r[e],r[t]]=[r[t],r[e]]}t(e=>({...e,flowerOrder:r}))},className:"px-5 py-3 text-white uppercase bg-black",children:"ar"===r?"أعد ترتيب الزهور":"Try a new Arrangement"}),(0,a.jsx)("button",{onClick:()=>{t(e=>({...e,greenery:(e.greenery+1)%3}))},className:"px-5 py-3 text-black uppercase border border-black",children:"ar"===r?"غيّر الأوراق الخضراء":"Change Greenery"})]})]}),(0,a.jsx)("div",{className:"flex relative justify-center items-center py-4 my-16",children:(0,a.jsxs)("div",{className:"relative w-[500px] min-h-[410px]",children:[(0,a.jsx)(s.default,{src:"/".concat(e.mode,"/bush/bush-").concat(e.greenery+1,".png"),alt:"bush background",width:600,height:500,className:"absolute top-1/2 left-1/2 z-0 transform -translate-x-1/2 -translate-y-1/2",priority:!0}),(0,a.jsx)("div",{className:"flex flex-wrap reverse w-[300px] justify-center items-center -space-x-4 -space-y-20 relative m-auto",children:e.flowers.flatMap((t,r)=>{let n=l.find(e=>e.id===t.id);return n?Array(t.count).fill(null).map((l,i)=>{var o;let c=10*Math.random()-5,d=e.flowerOrder.length>0&&null!=(o=e.flowerOrder[r*t.count+i])?o:r*t.count+i,m=(e=>{switch(e){case"small":return 80;case"large":return 160;default:return 120}})(n.size);return(0,a.jsx)("div",{className:"flex relative justify-center items-center pt-4",style:{order:d},children:(0,a.jsx)(s.default,{src:"/".concat(e.mode,"/flowers/").concat(n.name,".png"),alt:n.name,width:m,height:m,className:"relative z-10 transition-transform hover:scale-105",style:{transform:"rotate(".concat(c,"deg)")},priority:!0})},"".concat(r,"-").concat(i))}):[]})}),(0,a.jsx)("div",{children:(0,a.jsx)(s.default,{src:"/".concat(e.mode,"/bush/bush-").concat(e.greenery+1,"-top.png"),alt:"bush top",width:600,height:500,className:"absolute top-1/2 left-1/2 z-10 transform -translate-x-1/2 -translate-y-1/2",priority:!0})})]})})]})}function b(){let{bouquet:e,setBouquet:t,lang:r}=(0,h.Z)();return(0,a.jsx)("div",{className:"text-center ".concat("ar"===r?"font-arabic":""),children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-md my-8",children:"ar"===r?"اكتب بطاقتك":"WRITE THE CARD"}),(0,a.jsxs)("div",{className:"flex flex-row items-center justify-center",children:[(0,a.jsxs)("div",{className:"hidden md:flex flex-row items-center justify-center -space-x-12",children:[(0,a.jsx)(s.default,{src:"/full/flowers/daisy.png",alt:"card front",width:140,height:200,className:"-rotate-12 hover:-translate-y-4 transition-all duration-300"}),(0,a.jsx)(s.default,{src:"/full/flowers/lily.png",alt:"card front",width:140,height:200,className:"-translate-y-5 hover:-translate-y-4 transition-all duration-300"}),(0,a.jsx)(s.default,{src:"/full/flowers/anemone.png",alt:"card front",width:140,height:200,className:"rotate-12 hover:-translate-y-4 transition-all duration-300"})]}),(0,a.jsx)("div",{className:"bg-white border-2 border-black p-10 max-w-lg mx-4 md:mx-10 relative",dir:"ar"===r?"rtl":"ltr",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,a.jsx)("label",{htmlFor:"recipient",children:"ar"===r?"إلى ":"Dear "}),(0,a.jsx)("input",{id:"recipient",value:e.letter.recipient||"",onChange:e=>t(t=>({...t,letter:{...t.letter,recipient:e.target.value}})),placeholder:"ar"===r?"الأحباب،":"Flora,",className:"border-none bg-transparent focus:outline-none focus:ring-0 ".concat("ar"===r?"font-arabic":"")})," "]}),(0,a.jsx)("div",{children:(0,a.jsx)("textarea",{id:"message",value:e.letter.message||"",onChange:e=>t(t=>({...t,letter:{...t.letter,message:e.target.value}})),placeholder:"ar"===r?"لدي الكثير لأخبرك به، لكن المساحة ضيقة! ومع ذلك، يجب أن تعرف...":"I have so much to tell you, but so little space on this card! Still, you must know...",rows:5,className:"w-full border-none bg-transparent focus:outline-none focus:ring-0 ".concat("ar"===r?"font-arabic":"")})}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 mt-4 w-fit ml-auto items-end",style:{marginLeft:"ar"===r?"0":"auto",marginRight:"ar"===r?"auto":"0",alignItems:"ar"===r?"flex-end":"flex-start"},children:[(0,a.jsx)("label",{htmlFor:"sender",className:"".concat("ar"===r?"text-left":"text-right"," w-full"),children:"ar"===r?"تقبل الله منا ومنكم ,":"Sincerely,"}),(0,a.jsx)("input",{id:"sender",value:e.letter.sender||"",onChange:e=>t(t=>({...t,letter:{...t.letter,sender:e.target.value}})),placeholder:"ar"===r?"محبكم":"Me",className:"border-none bg-transparent focus:outline-none focus:ring-0 ".concat("ar"===r?"text-left font-arabic":"text-right")})]})]})}),(0,a.jsxs)("div",{className:"hidden md:flex flex-row items-center justify-center -space-x-12",children:[(0,a.jsx)(s.default,{src:"/full/flowers/carnation.png",alt:"card front",width:140,height:200,className:"-rotate-12 hover:-translate-y-4 transition-all duration-300"}),(0,a.jsx)(s.default,{src:"/full/flowers/sunflower.png",alt:"card front",width:140,height:200,className:"-translate-y-5 hover:-translate-y-4 transition-all duration-300"}),(0,a.jsx)(s.default,{src:"/full/flowers/peony.png",alt:"card front",width:140,height:200,className:"rotate-12 hover:-translate-y-4 transition-all duration-300"})]})]})]})})}var j=r(8064),v=r(5647),w=r(9509);let y=w.env.NEXT_PUBLIC_SUPABASE_URL,N=w.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,A=y&&N?(0,v.UU)(y,N):null;var C=r(5695),z=r(5410);function k(e){let{bouquet:t,lang:r}=e;return(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"flex flex-col max-w-lg mx-auto bg-[#F5F5DC] rounded-full",children:(0,a.jsx)("div",{className:"flex relative justify-center items-center py-4 my-4",children:(0,a.jsxs)("div",{className:"relative w-[500px] min-h-[410px]",children:[(0,a.jsx)(s.default,{src:"/".concat(t.mode,"/bush/bush-").concat(t.greenery+1,".png"),alt:"bush background",width:600,height:500,className:"absolute top-1/2 left-1/2 z-0 transform -translate-x-1/2 -translate-y-1/2",priority:!0}),(0,a.jsx)("div",{className:"flex flex-wrap reverse w-[300px] justify-center items-center -space-x-4 -space-y-20 relative m-auto",children:t.flowers.flatMap((e,r)=>{let n=l.find(t=>t.id===e.id);return n?Array(e.count).fill(null).map((l,i)=>{var o;let c=10*Math.random()-5,d=t.flowerOrder.length>0&&null!=(o=t.flowerOrder[r*e.count+i])?o:r*e.count+i,m=(e=>{switch(e){case"small":return 80;case"large":return 160;default:return 120}})(n.size);return(0,a.jsx)("div",{className:"flex relative justify-center items-center pt-4",style:{order:d},children:(0,a.jsx)(s.default,{src:"/".concat(t.mode,"/flowers/").concat(n.name,".png"),alt:n.name,width:m,height:m,className:"relative z-10 transition-transform hover:scale-105",style:{transform:"rotate(".concat(c,"deg)")},priority:!0})},"".concat(r,"-").concat(i))}):[]})}),(0,a.jsx)("div",{children:(0,a.jsx)(s.default,{src:"/".concat(t.mode,"/bush/bush-").concat(t.greenery+1,"-top.png"),alt:"bush top",width:600,height:500,className:"absolute top-1/2 left-1/2 z-10 transform -translate-x-1/2 -translate-y-1/2",priority:!0})})]})})}),(0,a.jsx)("div",{className:"mx-auto max-w-sm text-sm text-center",children:(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"bg-white border-[1.5px] border-black p-8 mx-auto -translate-y-[50px] -rotate-2 hover:-rotate-2 transition-all duration-300 relative ".concat("ar"===r?"font-arabic":""),dir:"ar"===r?"rtl":"ltr",children:[(0,a.jsx)("div",{className:"absolute top-4 ".concat("ar"===r?"left-4":"right-4"," z-20 pointer-events-none"),children:(0,a.jsx)(s.default,{src:"/crescent.png",alt:"crescent moon",width:32,height:32,className:"object-contain sm:w-[40px] sm:h-[40px] ".concat("ar"===r?"scale-x-[-1]":"")})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"flex flex-row gap-2 items-left justify-left",children:(0,a.jsxs)("p",{className:"bg-transparent border-none focus:outline-none focus:ring-0",children:["ar"===r?"إلى ":"Dear "," ",t.letter.recipient]})}),(0,a.jsx)("div",{className:"ar"===r?"text-right":"text-left",children:(0,a.jsx)("p",{children:t.letter.message})}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 justify-end items-end",children:[(0,a.jsx)("p",{className:"bg-transparent border-none focus:outline-none focus:ring-0",children:"ar"===r?"تقبل الله منا ومنكم،":"Sincerely,"}),(0,a.jsx)("p",{className:"bg-transparent border-none focus:outline-none focus:ring-0",children:t.letter.sender})]})]})]})})})]})}function E(){let{bouquet:e,lang:t}=(0,h.Z)(),r=(0,n.useRef)(null),s=async()=>{if(null!==r.current)try{let e=await (0,j.$E)(r.current,{cacheBust:!0,pixelRatio:2,backgroundColor:"#F5F5DC"}),t=document.createElement("a");t.download="my-digibouquet.png",t.href=e,t.click()}catch(e){console.error("Failed to download image",e)}},l=(0,C.useRouter)(),i=async e=>{let r=(0,z.Ak)(8);if(!A)return void alert("Sharing is currently disabled as the database is not configured. Please use the 'Download Card' Feature.");let{data:a,error:n}=await A.from("bouquets").insert([{short_id:r,mode:"".concat(e.mode,"&lang=").concat("ar"===t?"ar":"en"),flowers:e.flowers,letter:e.letter,timestamp:e.timestamp,greenery:e.greenery,flowerOrder:e.flowerOrder}]).select();if(n||!a||0===a.length)return void console.error("Error creating bouquet:",n);let s=a[0].id;l.push("/bouquet/".concat(s))};return(0,a.jsxs)("div",{className:"text-center ".concat("ar"===t?"font-arabic":""),children:[(0,a.jsx)("h2",{className:"text-md uppercase text-center mb-10",children:"ar"===t?"أرسل الباقة":"SEND THE BOUQUET"}),(0,a.jsx)("div",{className:"flex justify-center w-full overflow-x-auto no-scrollbar",children:(0,a.jsxs)("div",{ref:r,className:"w-fit mx-auto p-4 sm:p-8 bg-[#F5F5DC]",children:[" ",(0,a.jsx)(k,{bouquet:e,lang:t})]})}),(0,a.jsxs)("div",{className:"flex flex-col gap-4 items-center justify-center mt-8",children:[(0,a.jsx)("button",{onClick:s,className:"uppercase text-black border border-black px-8 py-3 hover:bg-gray-100 transition-colors w-full max-w-xs",children:"ar"===t?"حمّل البطاقة":"DOWNLOAD CARD"}),(0,a.jsx)("button",{onClick:()=>{console.log("Sending bouquet"),i(e)},className:"uppercase text-white bg-black px-8 py-3 hover:bg-black/90 transition-colors w-full max-w-xs",children:"ar"===t?"اصنع رابط مشاركة":"CREATE SHAREABLE LINK"})]})]})}var M=r(6874),O=r.n(M);let D=["Pick Flowers","Customize Bouquet","Write Card","Share"];function F(){let{bouquet:e,canProceed:t,lang:r}=(0,h.Z)(),[l,i]=(0,n.useState)(0);return(0,a.jsxs)("main",{className:"container flex flex-col p-4 mx-auto ".concat("ar"===r?"font-arabic":""),dir:"ar"===r?"rtl":"ltr",children:[(0,a.jsx)(O(),{href:"/",children:(0,a.jsx)(s.default,{src:"/ramadan.png",alt:"ramadan",width:200,height:80,className:"object-cover mx-auto mt-6",priority:!0})}),(0,a.jsxs)("div",{className:"flex-grow py-8",children:[0===l&&(0,a.jsx)(p,{}),1===l&&(0,a.jsx)(g,{}),2===l&&(0,a.jsx)(b,{}),3===l&&(0,a.jsx)(E,{})]}),(0,a.jsxs)("div",{className:"flex flex-row gap-4 justify-center m-auto",children:[l>0&&(0,a.jsx)("button",{onClick:()=>i(e=>Math.max(e-1,0)),className:"text-sm px-4 py-2 border border-[#000000]",children:"ar"===r?"الخلف":"BACK"}),l<D.length-1&&(0,a.jsx)("button",{onClick:()=>i(e=>Math.min(e+1,D.length-1)),disabled:!t,className:"text-sm px-4 py-2 ml-auto ".concat(t?"bg-[#000000] text-[#F5F5DC]":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:"ar"===r?"التالي":"NEXT"})]})]})}},7283:(e,t,r)=>{Promise.resolve().then(r.bind(r,5597)),Promise.resolve().then(r.bind(r,2524))}},e=>{e.O(0,[992,847,441,964,358],()=>e(e.s=7283)),_N_E=e.O()}]);